<?xml version="1.0"?>
<robot name="svh" xmlns:xacro="http://www.ros.org/wiki/xacro">

    <!-- All inertia values are dummy values, please change them with the real ones -->


    <xacro:property name="cyl_radius" value="0.001" />

    <xacro:macro name="cylinder_inertial" params="radius length mass *origin">
        <inertial>
            <mass value="${mass}" />
            <xacro:insert_block name="origin" />
            <inertia ixx="${0.0833333 * mass * (3 * radius * radius + length * length)}" ixy="0.0" ixz="0.0"
                iyy="${0.0833333 * mass * (3 * radius * radius + length * length)}" iyz="0.0"
                izz="${0.5 * mass * radius * radius}" />
        </inertial>
    </xacro:macro>

    <xacro:macro name="dummy_inertial">
        <inertial>
            <mass value="0.03" />
            <inertia ixx="0.00001" ixy="0.0" ixz="0.0"
                iyy="0.00001" iyz="0.0"
                izz="0.00001" />
        </inertial>
    </xacro:macro>
    
    <xacro:macro name="trans_xacro" params="namehand jointname">
        <transmission name="${namehand}_${jointname}_transmission">
            <type>transmission_interface/SimpleTransmission</type>
            <joint name="${namehand}_${jointname}">
                <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
            </joint>
            <actuator name="motor_${namehand}_${jointname}">
                <mechanicalReduction>1</mechanicalReduction>
                <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
            </actuator>
        </transmission>
    </xacro:macro>

    <xacro:macro name="tip_ee" params="name parent xyz">
        <link name="${name}_tip_ee">
        </link>

        <joint name="${name}_tip_joint" type="fixed">
            <parent link="${parent}" />
            <child link="${name}_tip_ee" />
            <origin xyz="${xyz}" rpy="0 0 0" />
        </joint>
    </xacro:macro>


    <xacro:macro name="gazebo_contact" params="link_name">
        <gazebo reference="${link_name}">                                                                            
            <!--material>Gazebo/Blue</material-->                                                                      
            <mu1>70</mu1>
            <mu2>70</mu2>

            <minDepth>0.001</minDepth>
            <!--maxVel>0.1</maxVel-->

            <kp>10000000.0</kp>
            <kd>100000.0</kd>
        </gazebo>                         
    </xacro:macro>


	<xacro:macro name="capsule-collision" params="e1 e2 rad len rpy mid">
		<collision>
			<origin rpy="${rpy}" xyz="${e1}" />
			<geometry>
				<sphere radius="${rad}" />
			</geometry>
		</collision>
		<collision>
			<origin rpy="${rpy}" xyz="${mid}" />
			<geometry>
				<cylinder length="${len}" radius="${rad}" />
			</geometry>
		</collision>
		<collision>
			<origin rpy="${rpy}" xyz="${e2}" />
			<geometry>
				<sphere radius="${rad}" />
			</geometry>
		</collision>
	</xacro:macro>


    <xacro:macro name="svh" params="parent name side *origin">
        <!-- RIGHT HAND = 1, LEFT HAND = -1 -->
        <!-- BASE_LINE LINKS -->

		
		<link name="${name}_camera_link">
			<xacro:dummy_inertial />
            <visual>
                <origin rpy="0 0 0" xyz="0 0 0" />
                <geometry>
                    <mesh filename="package://centauro/centauro_urdf/meshes/schunk_hand/camera_link.STL" />
                </geometry>
            </visual>
            <collision>
               <origin rpy="0 0 0" xyz="0 0 0" />
                <geometry>
                    <mesh filename="package://centauro/centauro_urdf/meshes/schunk_hand/camera_link.STL" />
                </geometry>
            </collision>
		</link>
		
		<joint name="${name}_camera_joint" type="fixed" >
			<xacro:insert_block name="origin" />
            <parent link="${parent}" />
			<child link="${name}_camera_link"/>
		</joint>
			
		
		
        <joint name="${name}_base_joint" type="fixed" >
			<origin xyz="0 0 ${0.011 + 0.0065 + 0.032}" rpy="0 0 -${PI/2}" />
            <parent link="${name}_camera_link" />
            <child link="${name}_base_link" />
        </joint>

        <link name="${name}_base_link">
            <xacro:dummy_inertial />
            <xacro:insert_block name="origin" />
            
            <visual>
                <origin xyz="0 0 -0.032" rpy="0 0 0" />
                <geometry>
                    <mesh filename="package://centauro/centauro_urdf/meshes/schunk_hand/base10.dae" />
                </geometry>
            </visual>
            <collision>
                <origin xyz="0 0 -0.032" rpy="0 0 0" />
                <geometry>
                    <mesh filename="package://centauro/centauro_urdf/meshes/schunk_hand/base10.dae" />
                </geometry>
            </collision>
        </link>

        <link name="${name}_d">
            <xacro:dummy_inertial />
        </link>

        <link name="${name}_h">
            <xacro:dummy_inertial />
        </link>

        <link name="${name}_d2">
            <xacro:dummy_inertial />
        </link>

        <!-- LENGTH NOT FOUND IN DATASHEET! GUESSED!!! -->
        <link name="${name}_e1">
            <xacro:dummy_inertial />
            <visual>
                <origin rpy="0 0 0" xyz="0 0.01313 0" />
                <geometry>
                    <mesh scale="${side*(1)} 1 1" filename="package://centauro/centauro_urdf/meshes/schunk_hand/h10.dae" />
                </geometry>
            </visual>
            <collision>
                <!--origin rpy="0 0 0" xyz="0 0.01313 0" /-->
				<origin rpy="0 0 0" xyz="-0.00368 0.0 0.06" />
                <geometry>
					<box size="0.055 0.025 0.12"/>
                    <!--mesh scale="${side*(1)} 1 1" filename="package://centauro/centauro_urdf/meshes/schunk_hand/h10.dae" /-->
                </geometry>
            </collision>
			<!--xacro:capsule-collision e1="0.01251 0.00157842 0.0928213" e2="-0.000462897 0.0155179 0.0150623" rad="0.035205530643540185" len="0.080056609487979907" rpy="-2.96421 -0.162765 1.48449" mid="0.00602356 0.00854815 0.0539418" /-->
        </link>

        <!-- LENGTH NOT FOUND IN DATASHEET! GUESSED!!! -->
        <link name="${name}_e2">
            <xacro:dummy_inertial />
            <visual>
                <origin xyz="${side*(-0.0007)} 0 -0.01002" />
                <geometry>
                    <mesh scale="${side*(1)} 1 1" filename="package://centauro/centauro_urdf/meshes/schunk_hand/h11.dae" />
                </geometry>
            </visual>
            <collision>
                <origin xyz="${side*(-0.0007)} 0 -0.01002" />
                <geometry>
                    <mesh scale="${side*(1)} 1 1" filename="package://centauro/centauro_urdf/meshes/schunk_hand/h11.dae" />
                </geometry>
            </collision>
			<!--xacro:capsule-collision e1="-0.0130892 -0.00943485 0.0572708" e2="-0.00918653 -0.000238213 0.0052382" rad="0.025230241520476298" len="0.052982989614211572" rpy="-2.96665 0.0737258 -0.796187" mid="-0.0111379 -0.00483653 0.0312545" /-->
        </link>

        <!-- LENGTH NOT FOUND IN DATASHEET! GUESSED!!! -->
        <link name="${name}_e3">
            <xacro:dummy_inertial />
            <!-- <visual> -->
                <!-- 	<origin rpy="0 0 0" xyz="${side*(0.0175)} 0 0.015" /> -->
                <!-- 	<geometry> -->
                    <!-- 	  <cylinder length="0.03" radius="${cyl_radius}" /> -->
                    <!-- 	</geometry> -->
                <!-- 	<material name="green" /> -->
                <!-- </visual> -->
        </link>

        <link name="${name}_e">
            <xacro:dummy_inertial />
        </link>

        <!-- LENGTH NOT FOUND IN DATASHEET! GUESSED, BUT POSITION CALCULATED: E4 = D-G-F!!! -->
        <link name="${name}_e4">
            <xacro:dummy_inertial />
            <!-- <visual> -->
                <!-- 	<origin rpy="0 0 0" xyz="${side*(0.02825)} 0 0.043" /> -->
                <!-- 	<geometry> -->
                    <!-- 	  <cylinder length="0.026" radius="${cyl_radius}" /> -->
                    <!-- 	</geometry> -->
                <!-- 	<material name="green" /> -->
                <!-- </visual> -->
        </link>

        <!-- LENGTH NOT FOUND IN DATASHEET! GUESSED, BUT POSITION CALCULATED: E5 = D-G!!! -->
        <link name="${name}_e5">
            <xacro:dummy_inertial />
            <!-- <visual> -->
                <!-- 	<origin rpy="0 0 0" xyz="${side*(0.00675)} 0 0.04775" /> -->
                <!-- 	<geometry> -->
                    <!-- 	  <cylinder length="0.0355" radius="${cyl_radius}" /> -->
                    <!-- 	</geometry> -->
                <!-- 	<material name="green" /> -->
                <!-- </visual> -->
        </link>


        <!-- THUMB LINKS -->
        <link name="${name}_z">
            <xacro:dummy_inertial />
            <visual>
                <origin xyz="0 0 0.02442" />
                <geometry>
                    <mesh scale="1 ${side*(1)} 1" filename="package://centauro/centauro_urdf/meshes/schunk_hand/d10.dae" />
                </geometry>
            </visual>
            <!--collision>
                <origin xyz="0 0 0.02442" />
                <geometry>
                    <mesh scale="1 ${side*(1)} 1" filename="package://centauro/centauro_urdf/meshes/schunk_hand/d10.dae" />
                </geometry>
            </collision-->
			<xacro:capsule-collision e1="4.35903e-09 0.00135239 0.0513426" e2="5.25157e-09 -0.000134248 0.0410243" rad="0.018796440353616439" len="0.01042481810366226" rpy="2.9985 8.56161e-08 1.19461e-06" mid="4.8053e-09 0.000609069 0.0461834" />
        </link>

        <link name="${name}_virtual_a" >
            <xacro:dummy_inertial />
        </link>
        <link name="${name}_a">
            <xacro:dummy_inertial />
            <visual>
                <geometry>
                    <mesh scale="1 ${side*(1)} ${side*(1)}" filename="package://centauro/centauro_urdf/meshes/schunk_hand/d11.dae" />
                </geometry>
            </visual>
            <!--collision>
                <geometry>
                    <mesh scale="1 ${side*(1)} ${side*(1)}" filename="package://centauro/centauro_urdf/meshes/schunk_hand/d11.dae" />
                </geometry>
            </collision-->
			<xacro:capsule-collision e1="-0.000196701 -0.00148458 -1.94634e-05" e2="0.0470217 -4.66742e-06 -1.94537e-05" rad="0.016759180858870293" len="0.047241541605838461" rpy="-1.57079 1.53946 -1.53946" mid="0.0234125 -0.000744623 -1.94586e-05" />
        </link>

        <link name="${name}_b">
            <xacro:dummy_inertial />
  
            <visual>
                <geometry>
                    <mesh scale="1 ${side*(1)} ${side*(1)}" filename="package://centauro/centauro_urdf/meshes/schunk_hand/d12.dae" />
                </geometry>
            </visual>
            <!--collision>
                <geometry>
                    <mesh scale="1 ${side*(1)} ${side*(1)}" filename="package://centauro/centauro_urdf/meshes/schunk_hand/d12.dae" />
                </geometry>
            </collision-->
			<xacro:capsule-collision e1="1.38494e-05 -5.84793e-06 2.67358e-06" e2="0.0230284 -8.84308e-06 2.68087e-06" rad="0.015792729610253044" len="0.023014525532768428" rpy="1.56836 1.57067 1.56823" mid="0.0115211 -7.34551e-06 2.67722e-06" />
        </link>

        <link name="${name}_c">
            <xacro:dummy_inertial />

            <visual>
                <geometry>
                    <mesh scale="1 ${side*(1)} ${side*(1)}" filename="package://centauro/centauro_urdf/meshes/schunk_hand/d13.dae" />
                </geometry>
            </visual>
            <!--collision>
                <geometry>
                    <mesh scale="1 ${side*(1)} ${side*(1)}" filename="package://centauro/centauro_urdf/meshes/schunk_hand/d13.dae" />
                </geometry>
            </collision-->
			<xacro:capsule-collision e1="0.00205819 -0.000468129 7.76376e-10" e2="0.0172284 -0.000766437 -5.20034e-10" rad="0.010704766923000805" len="0.015173140958556149" rpy="1.5708 1.55113 1.55114" mid="0.0096433 -0.000617283 1.28171e-10" />
        </link>

        <!-- Tip link and joint  -->
        <xacro:tip_ee name="${name}_thumb" parent="${name}_c" xyz="0.012 0.01 0.0"/>

        <!-- INDEX FINGER LINKS -->
        <link name="${name}_virtual_l">
            <xacro:dummy_inertial />

            <visual>
                <origin xyz="0 0 0.01321" />
                <geometry>
                    <mesh filename="package://centauro/centauro_urdf/meshes/schunk_hand/f10.dae" />
                </geometry>
            </visual>
            <!--collision>
                <origin xyz="0 0 0.01321" />
                <geometry>
                    <mesh filename="package://centauro/centauro_urdf/meshes/schunk_hand/f10.dae" />
                </geometry>
            </collision-->
			<xacro:capsule-collision e1="-9.36911e-06 2.05516e-05 0.00314503" e2="-0.00112107 2.05558e-05 -0.00185211" rad="0.012418321587446528" len="0.0051193036818677207" rpy="-3.14159 -0.218902 3.14159" mid="-0.000565219 2.05537e-05 0.000646459" />
        </link>

        <link name="${name}_l">
            <xacro:dummy_inertial />

            <visual>
                <geometry>
                    <mesh filename="package://centauro/centauro_urdf/meshes/schunk_hand/f11.dae" />
                </geometry>
            </visual>
            <!--collision>
                <geometry>
                    <mesh filename="package://centauro/centauro_urdf/meshes/schunk_hand/f11.dae" />
                </geometry>
            </collision-->
			<xacro:capsule-collision e1="0.000494844 0.000786315 2.26346e-09" e2="0.0473615 0.000849073 1.00007e-09" rad="0.010410410097894696" len="0.046866668208232515" rpy="-1.57082 1.56946 -1.56948" mid="0.0239282 0.000817694 1.63176e-09" />
        </link>

        <link name="${name}_p">
            <xacro:cylinder_inertial radius="0.0095" length="0.035" mass="0.05">
                <origin xyz="0.0127 0.0 0.0" rpy="0.0 1.57 0.0" />
            </xacro:cylinder_inertial>
            <visual>
                <geometry>
                    <mesh filename="package://centauro/centauro_urdf/meshes/schunk_hand/f12.dae" />
                </geometry>
            </visual>
            <!--collision>
                <origin xyz="0.0127 0 0" rpy="0 1.57 0" />
                <geometry>
                    <cylinder length="0.035" radius="0.0095" />
                </geometry>
            </collision-->
			<xacro:capsule-collision e1="-2.97253e-05 1.67438e-05 -1.68626e-18" e2="0.0236878 5.60387e-05 1.29063e-17" rad="0.011029237446600827" len="0.023717568277531537" rpy="-1.5708 1.56914 -1.56914" mid="0.011829 3.63913e-05 5.61001e-18" />
        </link>

        <link name="${name}_t">
            <!--xacro:dummy_inertial /-->

            <xacro:cylinder_inertial radius="0.008" length="0.028" mass="0.03">
                <origin xyz="0.007 0 0" rpy="0 1.57 0" />
            </xacro:cylinder_inertial>
            <visual>
                <geometry>
                    <mesh filename="package://centauro/centauro_urdf/meshes/schunk_hand/f13.dae" />
                </geometry>
            </visual>
            <!--collision>
                <origin xyz="0.007 0 0" rpy="0 1.57 0" />
                <geometry>
                    <cylinder length="0.028" radius="0.007" />
                </geometry>
            </collision-->
			<xacro:capsule-collision e1="0.00112397 6.55543e-05 2.56588e-17" e2="0.0139049 0.000113778 -1.35513e-18" rad="0.0085850160742628311" len="0.012781041929071998" rpy="-1.5708 1.56702 -1.56702" mid="0.00751444 8.96663e-05 1.21518e-17" />
        </link>

        <!-- Tip link and joint  -->
        <xacro:tip_ee name="${name}_index" parent="${name}_t" xyz="0.012 0.007 0.0"/>

        <!-- MIDDLE FINGER LINKS -->
        <link name="${name}_virtual_k">
            <xacro:dummy_inertial />

            <visual>
                <origin xyz="0 0 0.01321" />
                <geometry>
                    <mesh filename="package://centauro/centauro_urdf/meshes/schunk_hand/f20.dae" />
                </geometry>
            </visual>
            <!--collision>
                <origin xyz="0 0 0.01321" />
                <geometry>
                    <mesh filename="package://centauro/centauro_urdf/meshes/schunk_hand/f20.dae" />
                </geometry>
            </collision-->
			<xacro:capsule-collision e1="-2.48053e-05 -8.49468e-07 0.00306843" e2="-0.00111997 -8.45255e-07 -0.001907" rad="0.012414963060840218" len="0.005094531844077382" rpy="-3.14159 -0.21666 3.14158" mid="-0.000572389 -8.47362e-07 0.000580713" />
        </link>

        <link name="${name}_k">
            <xacro:dummy_inertial />

            <visual>
                <geometry>
                    <mesh filename="package://centauro/centauro_urdf/meshes/schunk_hand/f21.dae" />
                </geometry>
            </visual>
            <!--collision>
                <geometry>
                    <mesh filename="package://centauro/centauro_urdf/meshes/schunk_hand/f21.dae" />
                </geometry>
            </collision-->
			<xacro:capsule-collision e1="0.000329902 0.000681478 -7.15399e-09" e2="0.049816 0.00108627 -1.22488e-09" rad="0.010342307568274646" len="0.049487793921311161" rpy="-1.57078 1.56262 -1.5626" mid="0.025073 0.000883872 -4.18943e-09" />
        </link>

        <link name="${name}_o">
            <!--xacro:dummy_inertial /-->

            <xacro:cylinder_inertial radius="0.0095" length="0.04" mass="0.05">
                <origin xyz="0.016 0 0" rpy="0 1.57 0" />
            </xacro:cylinder_inertial>

            <visual>
                <geometry>
                    <mesh filename="package://centauro/centauro_urdf/meshes/schunk_hand/f22.dae" />
                </geometry>
            </visual>
            <!--collision>
                <origin xyz="0.016 0 0" rpy="0 1.57 0" />
                <geometry>
                    <cylinder length="0.04" radius="0.0095" />
                </geometry>
            </collision-->
			<xacro:capsule-collision e1="-3.30221e-05 1.09516e-05 8.53407e-19" e2="0.0296739 5.63084e-05 1.90304e-18" rad="0.010992148805184548" len="0.029706932660074684" rpy="-1.5708 1.56927 -1.56927" mid="0.0148204 3.363e-05 1.37822e-18" />
        </link>

        <link name="${name}_s">
            <!--xacro:dummy_inertial /-->

            <xacro:cylinder_inertial radius="0.008" length="0.028" mass="0.03">
                <origin xyz="0.008 0 0" rpy="0 1.57 0" />
            </xacro:cylinder_inertial>
            <visual>
                <geometry>
                    <mesh filename="package://centauro/centauro_urdf/meshes/schunk_hand/f23.dae" />
                </geometry>
            </visual>
            <!--collision>
                <origin xyz="0.008 0 0" rpy="0 1.57 0" />
                <geometry>
                    <cylinder length="0.028" radius="0.007" />
                </geometry>
            </collision-->
			<xacro:capsule-collision e1="0.00111375 3.07691e-05 -1.75721e-18" e2="0.0138902 0.000112455 2.3265e-18" rad="0.0085854149843387958" len="0.012776675705837324" rpy="-1.5708 1.5644 -1.5644" mid="0.00750196 7.16119e-05 2.84644e-19" />
        </link>

        <!-- Tip link and joint  -->
        <xacro:tip_ee name="${name}_middle" parent="${name}_s" xyz="0.012 0.007 0.0"/>

        <!-- RING FINGER LINKS -->
        <link name="${name}_virtual_j">
            <xacro:dummy_inertial />

            <visual>
                <origin xyz="0 0 -0.01321" />
                <geometry>
                    <mesh filename="package://centauro/centauro_urdf/meshes/schunk_hand/f30.dae" />
                </geometry>
            </visual>
            <!--collision>
                <origin xyz="0 0 -0.01321" />
                <geometry>
                    <mesh filename="package://centauro/centauro_urdf/meshes/schunk_hand/f30.dae" />
                </geometry>
            </collision-->
			<xacro:capsule-collision e1="2.78542e-05 3.86086e-05 -0.0030288" e2="-0.00105626 3.86083e-05 0.00193101" rad="0.012414027708289858" len="0.0050769049340790139" rpy="5.49177e-08 -0.215196 -5.93196e-09" mid="-0.000514205 3.86085e-05 -0.000548897" />
        </link>

        <link name="${name}_j">
            <xacro:dummy_inertial />

            <visual>
                <geometry>
                    <mesh filename="package://centauro/centauro_urdf/meshes/schunk_hand/f31.dae" />
                </geometry>
            </visual>
            <!--collision>
                <geometry>
                    <mesh filename="package://centauro/centauro_urdf/meshes/schunk_hand/f31.dae" />
                </geometry>
            </collision-->
			<xacro:capsule-collision e1="-0.00092978 0.00119932 2.49389e-09" e2="0.0487774 -0.00107468 -7.49981e-09" rad="0.01052339034095227" len="0.049759154065575753" rpy="1.5708 1.52508 1.52508" mid="0.0239238 6.23222e-05 -2.50296e-09" />
        </link>

        <link name="${name}_n">
            <!--xacro:dummy_inertial /-->
            <xacro:cylinder_inertial radius="0.0095" length="0.042" mass="0.05">
                <origin xyz="0.016 0 0" rpy="0 1.57 0" />
            </xacro:cylinder_inertial>

            <visual>
                <geometry>
                    <mesh filename="package://centauro/centauro_urdf/meshes/schunk_hand/f32.dae" />
                </geometry>
            </visual>
            <!--collision>
                <origin xyz="0.016 0 0" rpy="0 1.57 0" />
                <geometry>
                    <cylinder length="0.042" radius="0.0095" />
                </geometry>
            </collision-->
			<xacro:capsule-collision e1="-1.93421e-05 5.57259e-06 7.00794e-20" e2="0.0296633 5.30125e-05 3.3687e-19" rad="0.010991146218303625" len="0.02968266472809454" rpy="-1.5708 1.5692 -1.5692" mid="0.014822 2.92925e-05 2.03475e-19" />
        </link>

        <link name="${name}_r">
            <!--xacro:dummy_inertial /-->
            <xacro:cylinder_inertial radius="0.008" length="0.028" mass="0.03">
                <origin xyz="0.008 0 0" rpy="0 1.57 0" />
            </xacro:cylinder_inertial>
            <visual>
                <geometry>
                    <mesh filename="package://centauro/centauro_urdf/meshes/schunk_hand/f33.dae" />
                </geometry>
            </visual>
            <!--collision>
                <origin xyz="0.008 0 0" rpy="0 1.57 0" />
                <geometry>
                    <cylinder length="0.028" radius="0.008" />
                </geometry>
            </collision-->
			<xacro:capsule-collision e1="0.00109315 6.51512e-05 -1.52904e-16" e2="0.0139022 6.98134e-05 1.15224e-16" rad="0.0085692963964682494" len="0.012809060260554582" rpy="-1.5708 1.57043 -1.57043" mid="0.00749768 6.74823e-05 -1.88397e-17" />
        </link>

        <!-- Tip link and joint  -->
        <xacro:tip_ee name="${name}_ring" parent="${name}_r" xyz="0.012 0.007 0.0"/>

        <!-- LITTLE FINGER LINKS -->
        <link name="${name}_virtual_i">
            <xacro:dummy_inertial />

            <visual>
                <origin xyz="0 0 -0.01321" />
                <geometry>
                    <mesh filename="package://centauro/centauro_urdf/meshes/schunk_hand/f40.dae" />
                </geometry>
            </visual>
            <!--collision>
                <origin xyz="0 0 -0.01321" />
                <geometry>
                    <mesh filename="package://centauro/centauro_urdf/meshes/schunk_hand/f40.dae" />
                </geometry>
            </collision-->
			<xacro:capsule-collision e1="-7.87181e-06 4.4169e-06 -0.00303052" e2="-0.00115107 4.41609e-06 0.00199426" rad="0.012391848764493013" len="0.0051531835401232677" rpy="1.62648e-07 -0.223705 -1.82689e-08" mid="-0.000579472 4.4165e-06 -0.000518133" />
        </link>

        <link name="${name}_i">
            <xacro:dummy_inertial />

            <visual>
                <geometry>
                    <mesh filename="package://centauro/centauro_urdf/meshes/schunk_hand/f41.dae" />
                </geometry>
            </visual>
            <!--collision>
                <geometry>
                    <mesh filename="package://centauro/centauro_urdf/meshes/schunk_hand/f41.dae" />
                </geometry>
            </collision-->
			<xacro:capsule-collision e1="-0.000481662 0.00135926 -6.99986e-09" e2="0.0431877 7.67402e-05 8.31818e-09" rad="0.010552620206262383" len="0.043688160092216294" rpy="1.57078 1.54144 1.54142" mid="0.021353 0.000718 6.59159e-10" />
        </link>

        <link name="${name}_m">
            <!--xacro:dummy_inertial /-->

            <xacro:cylinder_inertial radius="0.0095" length="0.032" mass="0.05">
                <origin xyz="0.016 0 0" rpy="0 1.57 0" />
            </xacro:cylinder_inertial>

            <visual>
                <geometry>
                    <mesh filename="package://centauro/centauro_urdf/meshes/schunk_hand/f42.dae" />
                </geometry>
            </visual>
            <!--collision>
                <origin xyz="0.016 0 0" rpy="0 1.57 0" />
                <geometry>
                    <cylinder length="0.032" radius="0.0095" />
                </geometry>
            </collision-->
			<xacro:capsule-collision e1="1.74585e-06 -2.21286e-06 7.25811e-19" e2="0.0195729 3.19402e-05 -1.41861e-17" rad="0.011141281998026834" len="0.01957120078815118" rpy="-1.5708 1.56905 -1.56905" mid="0.00978733 1.48637e-05 -6.73016e-18" />
        </link>

        <link name="${name}_q">
            <!--xacro:dummy_inertial /-->

            <xacro:cylinder_inertial radius="0.008" length="0.028" mass="0.03">
                <origin xyz="0.008 0 0" rpy="0 1.57 0" />
            </xacro:cylinder_inertial>

            <visual>
                <geometry>
                    <mesh filename="package://centauro/centauro_urdf/meshes/schunk_hand/f43.dae" />
                </geometry>
            </visual>
            <!--collision>
                <origin xyz="0.008 0 0" rpy="0 1.57 0" />
                <geometry>
                    <cylinder length="0.028" radius="0.008" />
                </geometry>
            </collision-->
			<xacro:capsule-collision e1="0.00111873 6.04446e-05 5.35122e-17" e2="0.0139081 6.27521e-05 -3.82445e-17" rad="0.0085788555164720368" len="0.012789379159944568" rpy="-1.5708 1.57062 -1.57062" mid="0.00751342 6.15983e-05 7.63387e-18" />
        </link>

        <!-- Tip link and joint  -->
        <xacro:tip_ee name="${name}_pinky" parent="${name}_q" xyz="0.012 0.007 0.0"/>

        <joint name="${name}_Thumb_Flexion" type="revolute">
            <parent link="${name}_virtual_a" />
            <child link="${name}_a" />
            <limit effort="1000.0" lower="0.0" upper="0.9704" velocity="1" />
            <origin xyz="0 0 0" rpy="0 0 ${side*(-0.9704)}" />
            <axis xyz="0 0 ${side*(1)}" />
        </joint>

        <xacro:trans_xacro namehand="${name}" jointname="Thumb_Flexion"/>
            
        <!--transmission name="${name}_Thumb_Flexion_transmission">
            <type>transmission_interface/SimpleTransmission</type>
            <joint name="${name}_Thumb_Flexion">
                <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
            </joint>
            <actuator name="motor_${name}_Thumb_Flexion">
                <mechanicalReduction>1</mechanicalReduction>
                <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
            </actuator>
        </transmission-->

        <joint name="${name}_Thumb_Helper" type="fixed">
            <!--limit effort="1000" upper="0" lower="0" velocity="1"/-->
            <parent link="${name}_z" />
            <child link="${name}_virtual_a" />
            <origin xyz="0 0 0.04596" rpy="0 -1.5707 3.1416" />
        </joint>


        <!-- BASE_LINE JOINTS -->
        <joint name="${name}_Thumb_Opposition" type="revolute">
            <parent link="${name}_e1" />
            <child link="${name}_z" />
            <limit effort="1000.0" lower="0.0" upper="0.9879" velocity="1" />
            <origin xyz="${side*(-0.01690)} 0.02626 0" rpy="0 0.2618 1.571" />
            <axis xyz="0 0 ${side*(-1)}" />
        </joint>

        <xacro:trans_xacro namehand="${name}" jointname="Thumb_Opposition"/>


        <!-- JOINT NOT FOR BASE_LINE. BUT WRITTEN DOWN HERE FOR BETTER UX -->

        <joint name="${name}_f1" type="fixed">
            <!--limit effort="1000" upper="0" lower="0" velocity="1"/-->
            <parent link="${name}_e1" />
            <child link="${name}_d" />
            <origin xyz="0 0 0" rpy="0 0 0" />
        </joint>

        <joint name="${name}_f2" type="fixed">
            <!--limit effort="1000" upper="0" lower="0" velocity="1"/-->
            <parent link="${name}_d" />
            <child link="${name}_h" />
            <origin xyz="0 0 0" rpy="0 0 0" />
        </joint>

        <joint name="${name}_f3" type="fixed">
            <!--limit effort="1000" upper="0" lower="0" velocity="1"/-->
            <parent link="${name}_h" />
            <child link="${name}_d2" />
            <origin xyz="0 0 0" rpy="0 0 0" />
        </joint>

        <joint name="${name}_f4" type="fixed">
            <!--limit effort="1000" upper="0" lower="0" velocity="1"/-->
            <parent link="${name}_base_link" />
            <child link="${name}_e1" />
            <origin xyz="0 -0.01313 0" rpy="0 0 0" />
        </joint>

        <joint name="${name}_j5" type="revolute">
            <parent link="${name}_e1" />
            <child link="${name}_e2" />
            <limit effort="1000.0" lower="0.0" upper="0.98786" velocity="1" />
            <origin xyz="${side*(0.01840)} 0.006 0.0375" rpy="0 0 0" />
            <axis xyz="0 0 ${side*(1)}" />
            <mimic joint="${name}_Thumb_Opposition" multiplier="1" offset="0" />
        </joint>
        <xacro:trans_xacro namehand="${name}" jointname="j5"/>

        <joint name="${name}_f5" type="fixed">
            <!--limit effort="1000" upper="0" lower="0" velocity="1"/-->
            <parent link="${name}_e2" />
            <child link="${name}_e3" />
            <origin xyz="0 -0.0060 0" rpy="0 0 0" />
        </joint>

        <joint name="${name}_f6" type="fixed">
            <!--limit effort="1000" upper="0" lower="0" velocity="1"/-->
            <parent link="${name}_e3" />
            <child link="${name}_e" />
            <origin xyz="0 0 0" rpy="0 0 0" />
        </joint>

        <joint name="${name}_f7" type="fixed">
            <!--limit effort="1000" upper="0" lower="0" velocity="1"/-->
            <parent link="${name}_e" />
            <child link="${name}_e4" />
            <origin xyz="0 0 0" rpy="0 0 0" />
        </joint>

        <joint name="${name}_f8" type="fixed">
            <!--limit effort="1000" upper="0" lower="0" velocity="1"/-->
            <parent link="${name}_e" />
            <child link="${name}_e5" />
            <origin xyz="0 0 0" rpy="0 0 0" />
        </joint>

        <!-- THUMB JOINTS -->
        <joint name="${name}_j3" type="revolute">
            <parent link="${name}_a" />
            <child link="${name}_b" />
            <limit effort="1000.0" lower="0.0" upper="0.98506" velocity="1" />
            <origin xyz="0.0485 0 0" rpy="0 0 0" />
            <axis xyz="0 0 ${side*(1)}" />
            <mimic joint="${name}_Thumb_Flexion" multiplier="1.01511" offset="0" />
        </joint>
        <xacro:trans_xacro namehand="${name}" jointname="j3"/>

        <joint name="${name}_j4" type="revolute">
            <parent link="${name}_b" />
            <child link="${name}_c" />
            <limit effort="1000.0" lower="0.0" upper="1.406" velocity="1" />
            <origin xyz="0.030 0 0" rpy="0 0 0" />
            <axis xyz="0 0 ${side*(1)}" />
            <mimic joint="${name}_Thumb_Flexion" multiplier="1.44889" offset="0" />
        </joint>
        <xacro:trans_xacro namehand="${name}" jointname="j4"/>

        <!-- INDEX FINGER JOINTS -->
        <joint name="${name}_Index_Finger_Distal" type="revolute">
            <parent link="${name}_l" />
            <child link="${name}_p" />
            <limit effort="1000.0" lower="0" upper="1.334" velocity="1" />
            <origin xyz="0.04804 0 0" rpy="0 0 0" />
            <axis xyz="0 0 1" />
        </joint>
        <xacro:trans_xacro namehand="${name}" jointname="Index_Finger_Distal"/>

        
        <joint name="${name}_Index_Finger_Proximal" type="revolute">
            <parent link="${name}_virtual_l" />
            <child link="${name}_l" />
            <limit effort="1000.0" lower="0.0" upper="0.79849" velocity="1" />
            <origin xyz="0 0 0" rpy="-1.5707 0 0" />
            <axis xyz="0 0 1" />
        </joint>
        <xacro:trans_xacro namehand="${name}" jointname="Index_Finger_Proximal"/>

        <!-- JOINT Finger_Spread in BASE_LINE section for better UX -->
        <joint name="${name}_j14" type="revolute">
            <parent link="${name}_p" />
            <child link="${name}_t" />
            <limit effort="1000.0" lower="0" upper="1.394" velocity="1" />
            <origin xyz="0.026 0 0" rpy="0 0 0" />
            <axis xyz="0 0 1" />
            <mimic joint="${name}_Index_Finger_Distal" multiplier="1.0450" offset="0" />
        </joint>
        <xacro:trans_xacro namehand="${name}" jointname="j14"/>

        <!-- MIDDLE FINGER JOINTS -->
        <joint name="${name}_Middle_Finger_Proximal" type="revolute">
            <parent link="${name}_virtual_k" />
            <child link="${name}_k" />
            <limit effort="1000.0" lower="0.0" upper="0.79849" velocity="1" />
            <origin xyz="0 0 0" rpy="-1.5707 0 0" />
            <axis xyz="0 0 1" />
        </joint>
        <xacro:trans_xacro namehand="${name}" jointname="Middle_Finger_Proximal"/>

        <joint name="${name}_Middle_Finger_Distal" type="revolute">
            <parent link="${name}_k" />
            <child link="${name}_o" />
            <limit effort="1000.0" lower="0" upper="1.334" velocity="1" />
            <origin xyz="0.05004 0 0" rpy="0 0 0" />
            <axis xyz="0 0 1" />
        </joint>
        <xacro:trans_xacro namehand="${name}" jointname="Middle_Finger_Distal"/>

        <joint name="${name}_j15" type="revolute">
            <parent link="${name}_o" />
            <child link="${name}_s" />
            <limit effort="1000.0" lower="0" upper="1.334" velocity="1" />
            <origin xyz="0.032 0 0" rpy="0 0 0" />
            <axis xyz="0 0 1" />
            <mimic joint="${name}_Middle_Finger_Distal" multiplier="1.0454" offset="0" />
        </joint>
        <xacro:trans_xacro namehand="${name}" jointname="j15"/>

        <!-- RING FINGER JOINTS -->
        <joint name="${name}_Ring_Finger" type="revolute">
            <parent link="${name}_virtual_j" />
            <child link="${name}_j" />
            <limit effort="1000.0" lower="0.0" upper="0.98175" velocity="1" />
            <origin xyz="0 0 0" rpy="1.5707 0 0" />
            <axis xyz="0 0 1" />
        </joint>
        <xacro:trans_xacro namehand="${name}" jointname="Ring_Finger"/>


        <joint name="${name}_j12" type="revolute">
            <parent link="${name}_j" />
            <child link="${name}_n" />
            <limit effort="1000.0" lower="0" upper="1.334" velocity="1" />
            <origin xyz="0.05004 0 0" rpy="0 0 0" />
            <axis xyz="0 0 1" />
            <mimic joint="${name}_Ring_Finger" multiplier="1.3588" offset="0" />
        </joint>
        <xacro:trans_xacro namehand="${name}" jointname="j12"/>

        <joint name="${name}_j16" type="revolute">
            <parent link="${name}_n" />
            <child link="${name}_r" />
            <limit effort="1000.0" lower="0" upper="1.395" velocity="1" />
            <origin xyz="0.032 0 0" rpy="0 0 0" />
            <axis xyz="0 0 1" />
            <mimic joint="${name}_Ring_Finger" multiplier="1.42093" offset="0" />
        </joint>
        <xacro:trans_xacro namehand="${name}" jointname="j16"/>

        <!-- PINKY JOINTS -->
        <joint name="${name}_Pinky" type="revolute">
            <parent link="${name}_virtual_i" />
            <child link="${name}_i" />
            <limit effort="1000.0" lower="0.0" upper="0.98175" velocity="1" />
            <origin xyz="0 0 0" rpy="1.5707 0 0" />
            <axis xyz="0 0 1" />
        </joint>
        <xacro:trans_xacro namehand="${name}" jointname="Pinky"/>

        <joint name="${name}_j13" type="revolute">
            <parent link="${name}_i" />
            <child link="${name}_m" />
            <limit effort="1000.0" lower="0" upper="1.334" velocity="1" />
            <origin xyz="0.04454 0 0" rpy="0 0 0" />
            <axis xyz="0 0 1" />
            <mimic joint="${name}_Pinky" multiplier="1.35880" offset="0" />
        </joint>
        <xacro:trans_xacro namehand="${name}" jointname="j13"/>

        <joint name="${name}_j17" type="revolute">
            <parent link="${name}_m" />
            <child link="${name}_q" />
            <limit effort="1000.0" lower="0" upper="1.3971" velocity="1" />
            <origin xyz="0.022 0 0" rpy="0 0 0" />
            <axis xyz="0 0 1" />
            <mimic joint="${name}_Pinky" multiplier="1.42307" offset="0" />
        </joint>
        <xacro:trans_xacro namehand="${name}" jointname="j17"/>

        <joint name="${name}_index_spread" type="revolute">
            <parent link="${name}_d2" />
            <child link="${name}_virtual_l" />
            <limit effort="1000.0" lower="0.0" upper="0.28833" velocity="1" />
            <origin xyz="${side*(-0.025)} 0 0.110" rpy="0 -1.5707 1.5707" />
            <axis xyz="0 0 ${side*(1)}" />
            <mimic joint="${name}_Finger_Spread" multiplier="0.5" offset="0" />
        </joint>
        <xacro:trans_xacro namehand="${name}" jointname="index_spread"/>

        <joint name="${name}_middle_spread_dummy" type="fixed">
            <!--limit effort="1000" upper="0" lower="0" velocity="1"/-->
            <parent link="${name}_d" />
            <child link="${name}_virtual_k" />
            <origin xyz="0 0 0.110" rpy="0 -1.5707 1.5707" />
        </joint>


        <joint name="${name}_ring_spread" type="revolute">
            <parent link="${name}_e5" />
            <child link="${name}_virtual_j" />
            <limit effort="1000.0" lower="0.0" upper="0.28833" velocity="1" />
            <origin xyz="${side*(0.003855)} 0 0.0655" rpy="-1.5707 -1.5707 0" />
            <axis xyz="0 0 ${side*(1)}" />
            <mimic joint="${name}_Finger_Spread" multiplier="0.5" offset="0" />
        </joint>
        <xacro:trans_xacro namehand="${name}" jointname="ring_spread"/>

        <joint name="${name}_Finger_Spread" type="revolute">
            <parent link="${name}_e4" />
            <child link="${name}_virtual_i" />
            <limit effort="1000.0" lower="0.00" upper="0.5829" velocity="1" />
            <origin xyz="${side*(0.025355)} 0 0.056" rpy="-1.5707 -1.5707 0" />
            <axis xyz="0 0 ${side*(1)}" />
        </joint>    
        <xacro:trans_xacro namehand="${name}" jointname="Finger_Spread"/>

        <!-- Gazebo contact properties of the links that can have contact with objects -->
        <xacro:gazebo_contact link_name="right_hand_c" />
        <xacro:gazebo_contact link_name="right_hand_b" />
        <xacro:gazebo_contact link_name="right_hand_a" />
        <xacro:gazebo_contact link_name="right_hand_t" />
        <xacro:gazebo_contact link_name="right_hand_p" />
        <xacro:gazebo_contact link_name="right_hand_l" />
        <xacro:gazebo_contact link_name="right_hand_s" />
        <xacro:gazebo_contact link_name="right_hand_o" />
        <xacro:gazebo_contact link_name="right_hand_k" />
        <xacro:gazebo_contact link_name="right_hand_r" />
        <xacro:gazebo_contact link_name="right_hand_n" />
        <xacro:gazebo_contact link_name="right_hand_j" />
        <xacro:gazebo_contact link_name="right_hand_q" />
        <xacro:gazebo_contact link_name="right_hand_m" />
        <xacro:gazebo_contact link_name="right_hand_i" />
        
        <xacro:gazebo_contact link_name="right_hand_d" />

    </xacro:macro>
</robot>

